import{_ as s,c as a,o as i,a1 as n}from"./chunks/framework.CaBQSRqq.js";const g=JSON.parse('{"title":"PHP 配置流程","description":"","frontmatter":{},"headers":[],"relativePath":"code/basic/php.md","filePath":"code/basic/php.md"}'),p={name:"code/basic/php.md"},e=n(`<h1 id="php-配置流程" tabindex="-1">PHP 配置流程 <a class="header-anchor" href="#php-配置流程" aria-label="Permalink to &quot;PHP 配置流程&quot;">​</a></h1><h2 id="_1-ubuntu-下配置-php" tabindex="-1">1. Ubuntu 下配置 PHP <a class="header-anchor" href="#_1-ubuntu-下配置-php" aria-label="Permalink to &quot;1. Ubuntu 下配置 PHP&quot;">​</a></h2><h3 id="_1-1-更新-apt" tabindex="-1">1.1 更新 apt <a class="header-anchor" href="#_1-1-更新-apt" aria-label="Permalink to &quot;1.1 更新 apt&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo apt update</span></span></code></pre></div><h3 id="_1-2-添加-php-ppa" tabindex="-1">1.2 添加 PHP PPA <a class="header-anchor" href="#_1-2-添加-php-ppa" aria-label="Permalink to &quot;1.2 添加 PHP PPA&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo add-apt-repository ppa:ondrej/php</span></span>
<span class="line"><span>sudo apt update</span></span></code></pre></div><h3 id="_1-3-安装指定版本的-php" tabindex="-1">1.3 安装指定版本的 PHP <a class="header-anchor" href="#_1-3-安装指定版本的-php" aria-label="Permalink to &quot;1.3 安装指定版本的 PHP&quot;">​</a></h3><p>此处是以 <code>PHP7.4</code> 为例，如果环境中需要用 <code>nginx</code> 作为服务器，还需要下载 <code>php-fpm</code> 扩展</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-fpm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-{dev,mysql,curl,json,mbstring,xml,intl,yaml,zip}</span></span></code></pre></div><h2 id="_2-在-ubuntu-下切换-php-版本" tabindex="-1">2. 在 Ubuntu 下切换 PHP 版本 <a class="header-anchor" href="#_2-在-ubuntu-下切换-php-版本" aria-label="Permalink to &quot;2. 在 Ubuntu 下切换 PHP 版本&quot;">​</a></h2><p>或许安装了很多个 <code>PHP</code> ，难免会遇到切换版本的时候</p><h3 id="_2-1-使用-update-alternatives-工具管理-php" tabindex="-1">2.1 使用 update-alternatives 工具管理 PHP <a class="header-anchor" href="#_2-1-使用-update-alternatives-工具管理-php" aria-label="Permalink to &quot;2.1 使用 update-alternatives 工具管理 PHP&quot;">​</a></h3><p>一共有三条命令，都需要执行并选择</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 选择系统中可用的 PHP 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 选择系统中可用的 phpize 版本，phpize 是一个用于为 PHP 扩展编译生成配置文件的工具</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> phpize</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 选择系统中可用的 php-config 版本，php-config 是一个用于获取 PHP 配置信息的工具，比如编译参数、安装路径等</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-alternatives</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php-config</span></span></code></pre></div><p>以第一条为例，执行 <code>sudo update-alternatives --config php</code> ，这个命令会列出所有安装的 <code>PHP</code> 版本，并允许你选择默认的命令行版本</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>There are 3 choices for the alternative php (providing /usr/bin/php).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  Selection    Path             Priority   Status</span></span>
<span class="line"><span>------------------------------------------------------------</span></span>
<span class="line"><span>  0            /usr/bin/php8.3   83        auto mode</span></span>
<span class="line"><span>* 1            /usr/bin/php7.4   74        manual mode</span></span>
<span class="line"><span>  2            /usr/bin/php8.1   81        manual mode</span></span>
<span class="line"><span>  3            /usr/bin/php8.3   83        manual mode</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Press &lt;enter&gt; to keep the current choice[*], or type selection number:</span></span></code></pre></div><p>如果你想切换到 <code>PHP8.1</code>，那么输入 2，然后回车。 你可能还需要更新 <code>Apache</code> 或 <code>nginx</code>（如果你使用这些web服务器的话）来使用新版本的PHP。</p><h3 id="_2-2-apache-配置" tabindex="-1">2.2 Apache 配置 <a class="header-anchor" href="#_2-2-apache-配置" aria-label="Permalink to &quot;2.2 Apache 配置&quot;">​</a></h3><p>对于 <code>Apache</code>，你可以禁用旧版本的 <code>PHP module</code>，并启用你想要使用的版本：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁用PHP 7.4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a2dismod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用PHP 8.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a2enmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php8.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span></code></pre></div><h3 id="_2-3-nginx-配置" tabindex="-1">2.3 Nginx 配置 <a class="header-anchor" href="#_2-3-nginx-配置" aria-label="Permalink to &quot;2.3 Nginx 配置&quot;">​</a></h3><p>对于 <code>nginx</code> ，你需要编辑你的 <code>nginx</code> 配置文件，通常位于 <code>/etc/nginx/sites-available/</code> 中，然后重启nginx服务：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑对应的nginx配置文件，更新fastcgi_pass指向到新的PHP FPM socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span></code></pre></div>`,23),t=[e];function h(l,d,o,c,k,r){return i(),a("div",null,t)}const F=s(p,[["render",h]]);export{g as __pageData,F as default};
