import{_ as s,c as i,o as a,a1 as n}from"./chunks/framework.CaBQSRqq.js";const g=JSON.parse('{"title":"DuckDB 配置流程","description":"","frontmatter":{},"headers":[],"relativePath":"code/database/duckdb.md","filePath":"code/database/duckdb.md"}'),t={name:"code/database/duckdb.md"},e=n(`<h1 id="duckdb-配置流程" tabindex="-1">DuckDB 配置流程 <a class="header-anchor" href="#duckdb-配置流程" aria-label="Permalink to &quot;DuckDB 配置流程&quot;">​</a></h1><h2 id="_1-duckdb-是什么" tabindex="-1">1.DuckDB 是什么 <a class="header-anchor" href="#_1-duckdb-是什么" aria-label="Permalink to &quot;1.DuckDB 是什么&quot;">​</a></h2><p>DuckDB 是一个快速的进程内分析数据库，DuckDB 支持功能丰富的 <code>SQL</code> 语言，并与客户端 <code>api</code> 进行了深度集成</p><h2 id="_2-安装" tabindex="-1">2.安装 <a class="header-anchor" href="#_2-安装" aria-label="Permalink to &quot;2.安装&quot;">​</a></h2><p>访问 <a href="https://duckdb.org/docs/installation/?version=stable&amp;environment=cli&amp;platform=linux&amp;download_method=direct&amp;architecture=x86_64" target="_blank" rel="noreferrer">DuckDB安装向导</a> 选择适合自身环境的安装包进行下载</p><h2 id="_3-在-ubuntu-中使用-duckdb" tabindex="-1">3.在 Ubuntu 中使用 DuckDB <a class="header-anchor" href="#_3-在-ubuntu-中使用-duckdb" aria-label="Permalink to &quot;3.在 Ubuntu 中使用 DuckDB&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://duckdb.org/docs/installation/?version=stable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;environment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cli</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;platform</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">linux</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;download_method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">direct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;architecture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">x86_64</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> duckdb_cli-linux-amd64.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./duckdb</span></span></code></pre></div><h2 id="_4-连接并访问-mysql" tabindex="-1">4.连接并访问 MySQL <a class="header-anchor" href="#_4-连接并访问-mysql" aria-label="Permalink to &quot;4.连接并访问 MySQL&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./duckdb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">INSTALL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LOAD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ATTACH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;host=localhost user=root password=!Ss12345678 port=3306 database=mysql&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqldb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (TYPE </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MYSQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">USE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqldb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SHOW</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="_5-提前下好扩展" tabindex="-1">5.提前下好扩展 <a class="header-anchor" href="#_5-提前下好扩展" aria-label="Permalink to &quot;5.提前下好扩展&quot;">​</a></h2><p><a href="https://duckdb.org/docs/extensions/working_with_extensions" target="_blank" rel="noreferrer">DuckDB扩展下载链接</a></p><p>下载好了之后存放到某个路径下，以 <code>mysql</code> 为例，下载链接可以是 <code>http://extensions.duckdb.org/v0.10.2/windows_amd64/mysql_scanner.duckdb_extension.gz</code>，之后便不必使用 <code>INSTALL mysql</code>，将 <code>{mysql_extension_path}</code> 替换为一个确切的路径</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./duckdb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LOAD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {mysql_extension_path}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ATTACH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;host=localhost user=root password=!Ss12345678 port=3306 database=mysql&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqldb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (TYPE </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MYSQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">USE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqldb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SHOW</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="_6-以-php-或者其他语言执行" tabindex="-1">6.以 PHP 或者其他语言执行 <a class="header-anchor" href="#_6-以-php-或者其他语言执行" aria-label="Permalink to &quot;6.以 PHP 或者其他语言执行&quot;">​</a></h2><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$exec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/home/songchenxuan/wwwroot/maxmaster/bin/duck/duckdb :memory: &lt; /home/songchenxuan/wwwroot/maxmaster/tmp/duckdb/run.sql 2&gt;&amp;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// $exec = &quot;$binPath :memory: \\&quot;$sqlContent\\&quot; 2&gt;&amp;1&quot;;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($exec, $output);</span></span></code></pre></div><p>其中 <code>run.sql</code> 可以是</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LOAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {EXTENSIONPATH};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ATTACH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;host={HOST} user={USER} password={PASSWORD} port={PORT} database={DATABASE}&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysqldb(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TYPE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MYSQL);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysqldb;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {COPYPATH};</span></span></code></pre></div><p><code>mysql</code> 的扩展先下载再使用也不是不行，只是会可能遇到以下的错误，所以不推荐</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">INSTALL mysql</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LOAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysql</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">报错</p><p>IO Error: Failed to create directory &quot;/var/www/.duckdb/&quot;! IO Error: Extension &quot;/var/www/.duckdb/extensions/v0.10.2/linux_amd64_gcc4/mysql_scanner.duckdb_extension&quot; not found.</p><p>IO Error: Cannot open file &quot;/var/www/.duckdb/extensions/v0.10.2/linux_amd64_gcc4/mysql_scanner.duckdb_extension&quot;: Permission denied</p></div><p>PHP 脚本（特别是通过 Web 服务器运行的脚本）可能以不同于命令行用户的用户身份执行。通常，Web 服务器（例如 Apache、Nginx）运行在其自己的用户（如 www-data 或 http）下。这可能导致权限不足，无法访问某些目录或文件。确保 PHP 执行时使用的用户具有足够的权限来访问和修改所需的文件和目录。需要调整 /var/www 或其他相关目录的权限。</p>`,21),h=[e];function l(p,k,d,r,o,c){return a(),i("div",null,h)}const u=s(t,[["render",l]]);export{g as __pageData,u as default};
